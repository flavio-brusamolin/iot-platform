<div class="broker-card">
  <header>
    <fa-icon [icon]="icons.info" [class]="['info-icon']" [ngbTooltip]="brokerInfoTemplate"></fa-icon>

    <div class="options-icon" ngbDropdown>
      <fa-icon [icon]="icons.options" ngbDropdownToggle></fa-icon>

      <div class="menu-options" ngbDropdownMenu>
        <a ngbDropdownItem (click)="reprocessBroker()">Reprocess<fa-icon [icon]="icons.processing"></fa-icon></a>
      </div>
    </div>
  </header>

  <main>
    {{ broker.name }}

    <div class="status">
      <small>
        {{ broker.status }}
      </small>

      <fa-icon [icon]="icons[broker.status]" [class]="['status-icon']" [spin]="broker.status === 'processing'">
      </fa-icon>
    </div>
  </main>
</div>

<ng-template #brokerInfoTemplate>
  <div class="broker-tooltip">
    <h4>
      <span>Address:</span>
      {{ broker.credentials.address }}
    </h4>

    <h4>
      <span>Port:</span>
      {{ broker.credentials.port }}
    </h4>

    <h4>
      <span>Username:</span>
      {{ broker.credentials.username }}
    </h4>
  </div>
</ng-template>
